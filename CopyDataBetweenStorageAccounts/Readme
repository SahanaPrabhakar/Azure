Sometimes there is a need to copy data from one storage account to another. In this example I have used Azure Functions and BlobClient python API to do the copy. 

The BlobClient copy activity does an async copy across storage accounts. This code has been tailored to work in context of Microsoft Compliance Center case export. 
Compliance center exports case files to a storage account but requires the storage account is accessible over the internet. If you are downloading user email, this could be a risk 
specially in Banks. This Azure Function can help address that. It uses Event Grid system topic trigger to call an Azure Function to copy data from a publicly accessible storage
account to a storage account which only allows access from "Trusted Azure services". Once the data ia fully copied, the source data is deleted. This reduces the duration of data 
exposure and hence the data exfiltration risk.

To deploy the function just run
1. Create a Function App in premium plan and configure env variables listed below
a)SOURCE_ACCOUNT_URL
b)SOURCE_CONTAINER_NAME
c)TARGET_ACCOUNT_URL
d)TARGET_CONTAINER_NAME
2. Configure Function App System Assigned Managed identity and give this identity "Blob Data Contributor role" in both source and target storage containers.
3. Az login 
4. Az account set --subscription <sub id>
5. func azure functionapp publish <function app name>
6. Configure Event Grid system topic from source and destination storage account for "Blob created" event

